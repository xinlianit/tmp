<div class="main-container" id="main-container">
	<div class="main-container-inner">
		<div class="main-content0">
			<div class="page-content">
				<div class="row">
					<div class="col-xs-12">
						<!-- PAGE CONTENT BEGINS -->
						<div class="row">
							<div class="col-xs-12">

								<div class="table-responsive">
									<div class="table-search">
										<form name="" action="" method="get">
											<div class="form-group">
												<div class="seach-item">
													<label class="col-sm-3 control-label no-padding-right search-label sea-label" style="width:36%!important;" for="form-field-1">节点名称/规则：</label>
													<input type="text" name="name" value="{$_GET['name']}" placeholder="节点名称/节点规则" class="input-sm seach-input value">
												</div>
												<div class="seach-item">
													<label class="col-sm-3 control-label no-padding-right search-label sea-label" style="width:36%!important;" for="form-field-1">模块/控制器：</label>
													<select name="id" class="form-control value">
														<option value="0">全部</option>
														<volist name="parent_node" id="c_list">
																<option <if condition="$c_list['id'] eq $_GET['id']">selected="selected"</if> value="{$c_list['id']}">
																	<switch name="c_list.type">
																		<case value="1">【模块】—</case>
																		<case value="2">【控制器】—</case>
																	</switch>
																	{$c_list.title}（{$c_list.name}）
																</option>
														</volist>
													</select>
												</div>
												<span class="input-group-btn search-btn">
													<button type="submit" class="btn btn-purple btn-sm">
														查询
														<i class="icon-search icon-on-right bigger-110"></i>
													</button>
												</span>
											</div>
										</form>
									</div>
									<div class="table-search">
										<div class="form-group">
											<span class="input-group-btn search-btn">
												<button event-name="addNode" dialog-title="添加权限节点" submit-title="添加" type="button" class="btn btn-sm btn-success">
													新增节点
													<i class="icon-plus smaller-75"></i>
												</button>
												<div class="separate-2"><i class="separate-flag"></i></div>
												<button event-name="delete" table-name="list" url="{:U('Node/deleteNode')}" message="确认要删选中的 x 条节点？|删除后信息不可恢复！" type="button" class="btn btn-sm btn-default">
													批量删除
													<i class="icon-remove"></i>
												</button>
											</span>
										</div>
									</div>
									<table table-id="list" class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th class="center">
													<label>
														<input type="checkbox" class="ace" />
														<span class="lbl"></span>
													</label>
												</th>
												
												<th>节点ID</th>
												<th>上级节点</th>
												<th>规则名称</th>
												<th>图标</th>
												<th>规则标题</th>
												<th>类型</th>
												<th>附件条件</th>
												<th>状态</th>
												<th>是否显示</th>
												<th>排序</th>
												<th class="hidden-480">操作</th>
											</tr>
										</thead>

										<tbody>
										
											<include file="Layout:notlist" />
											<volist name="page.list" id="list">
												<tr>
													<td class="center">
														<label>
															<input type="checkbox" tag-name="ids" value="{$list.id}" class="ace" />
															<span class="lbl"></span>
														</label>
													</td>
													
													
	
													<td>{$list.id}</td>
													<td>{$list.pid|get_field="AuthRule","title",array('id'=>###)|_default}</td>
													<td>{$list.name|_default}</td>
													<td>{$list.icon_name|_default}</td>
													<td>{$list.title}</td>
													<td>
														<switch name="list.type">
															<case value="1">模块</case>
															<case value="2">控制器</case>
															<case value="3">方法</case>
														</switch>
													</td>
													<td>{$list.condition|_default}</td>
													<td>
														<switch name="list.status">
															<case value="0">停用</case>
															<case value="1">启用</case>
														</switch>
													</td>
													<td>
														<switch name="list.is_show">
															<case value="0">不显示</case>
															<case value="1">显示</case>
														</switch>
													</td>
													<td>{$list.sort}</td>
													<td>
														<div class="visible-md visible-lg hidden-sm hidden-xs action-buttons">
															<a class="green" event-name="addNode" dialog-title="编辑权限节点" submit-title="保存" url="{:U('Node/nodeInfo')}" params="id={$list.id}" flag="edit" href="javascript:void(0);" title="编辑">
																<i class="icon-pencil bigger-130"></i>
															</a>
	
															<a class="red" event-name="delete" id-value="{$list.id}" url="{:U('Node/deleteNode')}" message="确认要删除此节点？|删除后信息不可恢复！" href="javascript:void(0);" title="删除">
																<i class="icon-trash bigger-130"></i>
															</a>
														</div>
													</td>
												</tr>
											</volist>
											
										</tbody>
									</table>
									<include file="Layout:page" />
								</div>
							</div>
						</div>
						
					</div><!-- /.col -->
				</div><!-- /.row -->
			</div><!-- /.page-content -->
		</div><!-- /.main-content -->
		
	</div><!-- /.main-container-inner -->
	
</div><!-- /.main-container -->

<!-- 添加编辑节点 -->
<include file="add_edit_node" />
